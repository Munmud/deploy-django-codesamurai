{% extends layout_path %}

{% load static %}
{% load i18n %}

{% block title %}
  Dashboard - Analytics
{% endblock %}

{% block vendor_css %}
  {{ block.super }}
{% endblock %}

{% block vendor_js %}
  {{ block.super }}
{% endblock %}

{% block page_js %}
  {{ block.super }}
{% endblock %}

{% block content %}
  <!-- Expense Overview -->
  <div class="{{ container_class }}">
    <!-- Heading -->
    <div class="row justify-content-center">
      <div class="col-auto">
        <h2 class="mb-0">{{ sts }}</h2>
      </div>
    </div>
    <!-- / Heading -->

    <br />

    <!-- Basic Bootstrap Table -->
    <div class="card">
      <h5 class="card-header">Ongoing Garbage Transfer</h5>
      <div class="table-responsive text-nowrap p-5">
        <table class="table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Landfill</th>
              <th>Vehicle</th>
              <th>Volume</th>
              <th>Status</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody class="table-border-bottom-0">
            {% for transfer in waste_transfers %}
              <tr>
                <td>
                  <i class="fab fa-angular fa-lg text-danger me-3"></i> <strong>{{ transfer.id }}</strong>
                </td>
                <td>{{ transfer.landfill }}</td>
                <td>{{ transfer.vehicle }}</td>
                <td>{{ transfer.volume }}</td>
                <td>{{ transfer.status }}</td>
                <td>
                  <div class="dropdown">
                    <button type="button" class="btn p-0 dropdown-toggle hide-arrow" data-bs-toggle="dropdown"><i class="bx bx-dots-vertical-rounded"></i></button>
                    <div class="dropdown-menu">
                      {% if transfer.status == 'Sending to Landfill' %}
                        <a class="dropdown-item" href="{% url 'under_maintenance' %}"><i class="bx bx-trash me-1"></i> Cancel</a>
                      {% endif %}
                      {% if transfer.status == 'Returning to STS' %}
                        <a class="dropdown-item" href="{% url 'waste_transfer_complete' transfer.id %}"><i class="bx bx-edit-alt me-1"></i> Vehicle Returned</a>
                      {% endif %}
                    </div>
                  </div>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    <!-- / Basic Bootstrap Table -->
  </div>
{% endblock %}
